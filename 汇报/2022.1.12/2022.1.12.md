#### 用上次的matlab程序进行消除畸变、透视变换之后，将得到的图片用更早之前选点测量长度的python程序进行测量尺子的长度，进行比较

照片在离镜头距离中等的位置进行拍摄，总共15张照片，选取三张尺子位置不同的照片进行测量。

一些问题：

1. 图片质量很差，手动鼠标选点非常模糊，精确度不高（我多次进行测量，结果相差也比较大）
2. matlab进行透视消除时，也是需要手动选四个角点，肯定会对精确度有影响（上次忘记提及）

### 结果：

第一张：

before：

<img src="D:\Courses\IPP\汇报\2022.1.12\test_1_8_1.jpg" alt="test_1_8_1" style="zoom:50%;" />

after:

<img src="D:\Courses\IPP\serverV2\res_matlab\res1.jpg" alt="res1" style="zoom:50%;" />

利用python去测量尺子长度结果（实际200mm）：

208.0150234959004 mm

误差率：4.01%

第二张：

before:

<img src="D:\Courses\IPP\汇报\2022.1.12\test_1_8_2.jpg" alt="test_1_8_2" style="zoom: 40%;" />

after:

<img src="D:\Courses\IPP\汇报\2022.1.12\res2.jpg" alt="res2" style="zoom:40%;" />

##### 新的问题：之前使用的matlab消除透视的程序会进行画面裁剪，导致距离棋盘格较远位置的图像丢失，预估是程序代码实现的问题。初步尝试修改代码，没有达到效果，需要进一步研究。于是在该图中，只能选取部分长度进行测试，测试结果：

利用python去测量尺子长度结果（实际40mm）：

41.175926123175266 mm

误差率：2.940%

第三张：

before：

<img src="D:\Courses\IPP\汇报\2022.1.12\test_1_8_3.jpg" alt="test_1_8_3" style="zoom:40%;" />

after:

<img src="D:\Courses\IPP\汇报\2022.1.12\res3.jpg" alt="res3" style="zoom:40%;" />

利用python去测量尺子长度结果（实际130mm）：

135.78834984095533 mm

误差率=4.45%

### 总结

1. 目前这个测量方法还是比较粗略，但就结果来说，误差率在4%左右，仍然较大
2. 就发现的新问题而言，matlab目前的程序会对画面进行裁剪，转换后的照片尺寸和原尺寸一致，意味着如果角度偏差很大，可能边缘位置的像素会丢失，例如例子2
3. 一点想法：既然python的透视变换一次只能传三个点，那么是否可以调用该函数两次，分别用不同的三个角点作为参数进行转换？（python的优势在我看来是不用手动去点，可以利用棋盘格识别得到的坐标进行操作，且容易自动化）
4. 下一步也许可以解决matlab画面裁剪的问题、优化手动取点，或者优化测量检验的方式（该方式目前也还是需要手动取点），或者尝试python两次调用函数的方法，与matlab进行一些比较。